{
  // ── TypeScript language server ───────────────────────────
  // Large monorepo with multiple Next.js apps + the "next" TS plugin is
  // routinely > 3 GB.  Raise the heap ceiling so tsserver stops crashing.
  "typescript.tsserver.maxTsServerMemory": 8192,
  // Use the workspace's own TypeScript installation (keeps versions in sync).
  "typescript.tsdk": "node_modules/typescript/lib",
  // Exclude heavy generated artefacts from tsserver's watch list.
  "typescript.tsserver.watchOptions": {
    "excludeDirectories": [
      "**/node_modules",
      "**/.next",
      "**/dist",
      "**/.turbo",
      "**/.tsbuildinfo"
    ]
  },

  // ── Python ──────────────────────────────────────────────
  // Cross-platform: Linux-first (VPS), Windows fallback via env override
  "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
  "python.terminal.activateEnvironment": true,
  "python.analysis.typeCheckingMode": "basic",
  "python.analysis.autoImportCompletions": true,
  // tooling/ml scripts use their own venv (requirements.txt) — suppress
  // "could not be resolved" errors for packages not in the workspace venv.
  "python.analysis.ignore": [
    "tooling/ml/**",
    // Satellite repos have their own venv + pyrightconfig.json.
    // Suppress Pylance analysis from the automation workspace context
    // to avoid false "could not be resolved" Django/pytest errors.
    "../nzila-abr-insights/backend/**",
    "../nzila-union-eyes/backend/**"
  ],
  "python.testing.pytestEnabled": true,
  "python.testing.pytestArgs": [
    "packages/automation"
  ],

  // ── Editor defaults ─────────────────────────────────────
  "[python]": {
    "editor.defaultFormatter": "ms-python.black-formatter",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": "explicit"
    }
  },
  "chat.tools.terminal.autoApprove": {
    "npx vitest": true
  },

  // ── SQL ─────────────────────────────────────────────────
  // Drizzle migrations are PostgreSQL.
  // Associate with "pgsql" so the MSSQL extension does not lint them —
  // MSSQL syntax like REPLACE/RAISE/BEFORE TRIGGER is invalid TSQL
  // but perfectly valid PostgreSQL, causing false-positive errors.
  "files.associations": {
    "packages/db/drizzle/**/*.sql": "pgsql"
  },
  // Disable MSSQL linting workspace-wide: this repo targets PostgreSQL only.
  "mssql.linting.enable": false,
  "vitest.disableWorkspaceWarning": true
}
